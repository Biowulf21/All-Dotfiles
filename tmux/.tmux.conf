###### GENERAL ######
# set prefix to Alt + b
bind-key M-Space send-prefix
set-option -g  prefix M-Space
set-option -sa terminal-overrides ",xterm-256color:Tc"

# add prefix text when in prefix mode
set -g status-left "#[bg=red]#{s/root//:client_key_table}"

# remove ctrl + b as default prefix
unbind-key C-b


# Config reload
bind-key r source-file ~/.tmux.conf \; display "Reloaded tmux config!"

# mouse mode on
set -g mouse on

###### PANES ######
# traverse panes with hjkl
bind-key -n M-h select-pane -L
bind-key -n C-j select-pane -D
bind-key -n C-k select-pane -U
bind-key -n M-l select-pane -R

# set vi-mode
set-window-option -g mode-keys vi
# keybindings
# bind-key -T copy-mode-vi V send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel


# autosave session
set -g @ressurrect-caputure-pane-contents 'on'
set -g @continuum-restore 'on'


# split panes
bind h split-window -v -c "#{pane_current_path}"
bind v split-window -h -c "#{pane_current_path}"

# synchronize mode
bind-key y set-window-option synchronize-panes\; display-message "Synch mode toggled"

###### WINDOWS ######
# New windows
bind-key n command-prompt -p "window name:" "new-window; rename-window '%%'"

#rename window
bind-key C-n command-prompt -p "rename window:" "rename-window '%%'"

# traverse windows
unbind-key -n C-l
unbind-key -n C-h
bind-key -n C-p next-window
bind-key -n C-u previous-window

# kill window with confirmation
bind C-w confirm-before -p "kill this window? (y/n)" "kill-window"

# kill windows with confirmation
bind C-a confirm-before -p "kill all windows? (y/n)" "kill-window -a"

###### SESSIONS ######

# kill sesssion
bind C-x confirm-before -p "kill this session? (y/n)" "kill-session" 

# Source plugins
source-file  ~/All-Dotfiles/tmux/.plugins.conf

# Source theme
source-file ~/All-Dotfiles/tmux/themes/.kanagawa_dark.conf

run '~/.tmux/plugins/tpm/tpm
# Source TPM
